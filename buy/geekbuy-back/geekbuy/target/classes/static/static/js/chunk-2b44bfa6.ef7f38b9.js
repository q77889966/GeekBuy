(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b44bfa6"],{2810:function(t,e,s){"use strict";s("b06c")},"2ea4":function(t,e,s){"use strict";s("c202")},"4fc4":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("div",{staticClass:"main-content"},[t._t("default")],2)])},i=[],n={name:"PageBody"},o=n,r=(s("c95a"),s("2877")),l=Object(r["a"])(o,a,i,!1,null,"7617c039",null);e["a"]=l.exports},"6e70":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-container"},[e("div",{staticClass:"app-name"},[e("router-link",{attrs:{to:"/"}},[e("b",{staticStyle:{color:"#333"}},[t._v("GeekBuy")])])],1),e("div",{staticClass:"search-container"},[e("el-input",{attrs:{placeholder:"欢迎来到GeekBuy，即刻买！"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchIdle.apply(null,arguments)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchIdle},slot:"append"})],1)],1),e("el-button",{attrs:{type:"primary",icon:"el-icon-s-tools"},on:{click:t.tool}},[t._v("工具")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.toRelease}},[t._v("即刻发布")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-chat-dot-round"},on:{click:t.toMessage}},[t._v("消息")]),t.isLogin?e("el-dropdown",{attrs:{trigger:"click"}},[e("div",{staticStyle:{cursor:"pointer",display:"flex","align-items":"center"}},[e("div",{staticStyle:{"font-size":"16px",color:"#666","padding-right":"5px"}},[t._v(t._s(t.nicknameValue?t.nicknameValue:t.nickname))]),e("el-avatar",{attrs:{src:t.avatarValue?t.avatarValue:t.avatar}})],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("div",{on:{click:t.toMe}},[t._v("个人中心")])]),e("el-dropdown-item",{staticStyle:{color:"red"},attrs:{divided:""}},[e("div",{on:{click:t.loginOut}},[t._v("退出登录")])])],1)],1):e("router-link",{staticClass:"user-name-text",attrs:{to:"/login"}},[t._v("登录")])],1)])},i=[],n=(s("a481"),{name:"Header",props:["searchInput","nicknameValue","avatarValue"],data:function(){return{searchValue:this.searchInput,nickname:"登录",avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",isLogin:!1}},created:function(){var t=this;this.$globalData.userInfo.nickname?(this.nickname=this.$globalData.userInfo.nickname,this.avatar=this.$globalData.userInfo.avatar,this.isLogin=!0):this.$api.getUserInfo().then((function(e){console.log("Header getUserInfo:",e),1===e.status_code&&(t.nickname=e.data.nickname,t.avatar=e.data.avatar,e.data.signInTime=e.data.signInTime.substring(0,10),t.$globalData.userInfo=e.data,t.isLogin=!0)}))},methods:{searchIdle:function(){"/search"!==this.$route.path?this.$router.push({path:"/search",query:{searchValue:this.searchValue}}):(this.$router.replace({path:"/search",query:{searchValue:this.searchValue}}),this.$router.go(0))},toMe:function(){"/me"!==this.$route.path&&this.$router.push({path:"/me"})},toMessage:function(){"/message"!==this.$route.path&&this.$router.push({path:"/message"})},toRelease:function(){"/release"!==this.$route.path&&this.$router.push({path:"/release"})},tool:function(){"/tool"!==this.$route.path&&this.$router.push({path:"/tool"})},loginOut:function(){var t=this;this.$api.logout().then((function(e){1===e.status_code?(t.$globalData.userInfo={},console.log("login out"),"/index"===t.$route.path?t.$router.go(0):t.$router.push({path:"/index"})):t.$message.error("网络或系统异常，退出登录失败！")}))}}}),o=n,r=(s("2810"),s("2877")),l=Object(r["a"])(o,a,i,!1,null,"164415d3",null);e["a"]=l.exports},"85a9":function(t,e,s){"use strict";var a=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"foot-container"},[e("div",{staticClass:"author"},[t._v("© 2023 GeekBuy. All Rights Reserved.")])])}],n={name:"Foot"},o=n,r=(s("a747"),s("2877")),l=Object(r["a"])(o,a,i,!1,null,"17569e24",null);e["a"]=l.exports},a23a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("app-head"),e("app-body",[e("div",{staticClass:"idle-details-container"},[e("div",{staticClass:"details-header"},[e("div",{staticClass:"details-header-user-info"},[e("el-image",{staticStyle:{width:"80px",height:"80px","border-radius":"5px"},attrs:{src:t.idleItemInfo.user.avatar,fit:"contain"}}),e("div",{staticStyle:{"margin-left":"10px"}},[e("div",{staticClass:"details-header-user-info-nickname"},[t._v(t._s(t.idleItemInfo.user.nickname))]),e("div",{staticClass:"details-header-user-info-time"},[t._v(t._s(t.idleItemInfo.user.signInTime.substring(0,10))+" 加入平台")])])],1),e("div",{staticClass:"details-header-buy",style:"width:"+(t.isMaster?"150px;":"280px;")},[e("div",{staticStyle:{color:"red","font-size":"18px","font-weight":"600"}},[t._v("￥"+t._s(t.idleItemInfo.idlePrice))]),t.isMaster||1===t.idleItemInfo.idleStatus?t._e():e("div",{staticStyle:{color:"red","font-size":"16px"}},[t._v("闲置已下架或删除")]),t.isMaster||1!==t.idleItemInfo.idleStatus?t._e():e("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){return t.buyButton(t.idleItemInfo)}}},[t._v("立即购买")]),t.isMaster||1!==t.idleItemInfo.idleStatus?t._e():e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.favoriteButton(t.idleItemInfo)}}},[t._v(t._s(t.isFavorite?"取消收藏":"收藏"))]),t.isMaster&&1===t.idleItemInfo.idleStatus?e("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){return t.changeStatus(t.idleItemInfo,2)}}},[t._v("下架")]):t._e(),t.isMaster&&2===t.idleItemInfo.idleStatus?e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.changeStatus(t.idleItemInfo,1)}}},[t._v("重新上架")]):t._e()],1)]),e("div",{staticClass:"details-info"},[e("div",{staticClass:"details-info-title"},[t._v(t._s(t.idleItemInfo.idleName))]),e("div",{staticClass:"details-info-main",domProps:{innerHTML:t._s(t.idleItemInfo.idleDetails)}},[t._v("\n                    "+t._s(t.idleItemInfo.idleDetails)+"\n                ")]),e("div",{staticClass:"details-picture"},t._l(t.idleItemInfo.pictureList,(function(t,s){return e("el-image",{staticStyle:{width:"90%","margin-bottom":"2px"},attrs:{src:t,fit:"contain"}})})),1)]),e("div",{staticClass:"message-container",attrs:{id:"replyMessageLocation"}},[e("div",{staticClass:"message-title"},[t._v("全部留言")]),e("div",{staticClass:"message-send"},[t.isReply?e("div",{staticStyle:{"padding-bottom":"10px"}},[e("el-button",{attrs:{type:"info"},on:{click:t.cancelReply}},[t._v("回复："+t._s(t.replyData.toMessage)+" @"+t._s(t.replyData.toUserNickname)+" "),e("i",{staticClass:"el-icon-close el-icon--right"})])],1):t._e(),e("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"留言提问...",maxlength:"200","show-word-limit":""},model:{value:t.messageContent,callback:function(e){t.messageContent=e},expression:"messageContent"}}),e("div",{staticClass:"message-send-button"},[e("el-button",{attrs:{plain:""},on:{click:t.sendMessage}},[t._v("发送留言")])],1)],1),e("div",t._l(t.messageList,(function(s,a){return e("div",{staticClass:"message-container-list"},[e("div",{staticClass:"message-container-list-left"},[e("el-image",{staticStyle:{width:"55px",height:"55px","border-radius":"5px"},attrs:{src:s.fromU.avatar,fit:"contain"}}),e("div",{staticClass:"message-container-list-text"},[e("div",{staticClass:"message-nickname"},[t._v(t._s(s.fromU.nickname)+"\n                                    "+t._s(s.toU.nickname?" @"+s.toU.nickname+"："+s.toM.content.substring(0,10)+(s.toM.content.length>10?"...":""):""))]),e("div",{staticClass:"message-content",domProps:{innerHTML:t._s(s.content)}},[t._v(t._s(s.content))]),e("div",{staticClass:"message-time"},[t._v(t._s(s.createTime))])])],1),e("div",{staticClass:"message-container-list-right"},[e("el-button",{staticStyle:{float:"right"},attrs:{plain:""},on:{click:function(e){return t.replyMessage(a)}}},[t._v("回复")])],1)])})),0)])]),e("app-foot")],1)],1)},i=[],n=s("f2cd"),o=n["a"],r=(s("2ea4"),s("2877")),l=Object(r["a"])(o,a,i,!1,null,"da8be034",null);e["default"]=l.exports},a747:function(t,e,s){"use strict";s("f027")},b06c:function(t,e,s){},c202:function(t,e,s){},c95a:function(t,e,s){"use strict";s("ff1e")},f027:function(t,e,s){},f2cd:function(t,e,s){"use strict";(function(t){s("28a5");var a=s("6e70"),i=s("4fc4"),n=s("85a9");e["a"]={name:"idle-details",components:{AppHead:a["a"],AppBody:i["a"],AppFoot:n["a"]},data:function(){return{messageContent:"",toUser:null,toMessage:null,isReply:!1,replyData:{toUserNickname:"",toMessage:""},messageList:[],idleItemInfo:{id:"",idleName:"",idleDetails:"",pictureList:[],idlePrice:0,idlePlace:"",idleLabel:"",idleStatus:-1,userId:"",user:{avatar:"",nickname:"",signInTime:""}},isMaster:!1,isFavorite:!0,favoriteId:0}},created:function(){var e=this,s=this.$route.query.id;this.$api.getIdleItem({id:s}).then((function(s){if(console.log(s),s.data){for(var a=s.data.idleDetails.split(/\r?\n/),i="",n=0;n<a.length;n++)i+="<p>"+a[n]+"</p>";s.data.idleDetails=i,s.data.pictureList=JSON.parse(s.data.pictureList),e.idleItemInfo=s.data,console.log(e.idleItemInfo);var o=e.getCookie("shUserId");console.log("userid",o),o==e.idleItemInfo.userId&&(console.log("isMaster"),e.isMaster=!0),e.checkFavorite(),e.getAllIdleMessage()}t("html,body").animate({scrollTop:0},{duration:500,easing:"swing"})}))},methods:{getAllIdleMessage:function(){var t=this;this.$api.getAllIdleMessage({idleId:this.idleItemInfo.id}).then((function(e){console.log("getAllIdleMessage",e.data),1===e.status_code&&(t.messageList=e.data)})).catch((function(){}))},checkFavorite:function(){var t=this;this.$api.checkFavorite({idleId:this.idleItemInfo.id}).then((function(e){e.data?t.favoriteId=e.data:t.isFavorite=!1}))},getCookie:function(t){for(var e=t+"=",s=document.cookie.split(";"),a=0;a<s.length;a++){var i=s[a].trim();if(0===i.indexOf(e))return i.substring(e.length,i.length)}return""},replyMessage:function(e){t("html,body").animate({scrollTop:t("#replyMessageLocation").offset().top-600},{duration:500,easing:"swing"}),this.isReply=!0,this.replyData.toUserNickname=this.messageList[e].fromU.nickname,this.replyData.toMessage=this.messageList[e].content.substring(0,10)+(this.messageList[e].content.length>10?"...":""),this.toUser=this.messageList[e].userId,this.toMessage=this.messageList[e].id},changeStatus:function(t,e){var s=this;this.$api.updateIdleItem({id:t.id,idleStatus:e}).then((function(t){console.log(t),1===t.status_code?s.idleItemInfo.idleStatus=e:s.$message.error(t.msg)}))},buyButton:function(t){var e=this;this.$api.addOrder({idleId:t.id,orderPrice:t.idlePrice}).then((function(t){console.log(t),1===t.status_code?e.$router.push({path:"/order",query:{id:t.data.id}}):e.$message.error(t.msg)})).catch((function(t){}))},favoriteButton:function(t){var e=this;this.isFavorite?this.$api.deleteFavorite({id:this.favoriteId}).then((function(t){console.log(t),1===t.status_code?(e.$message({message:"已取消收藏！",type:"success"}),e.isFavorite=!1):e.$message.error(t.msg)})).catch((function(t){})):this.$api.addFavorite({idleId:t.id}).then((function(t){console.log(t),1===t.status_code?(e.$message({message:"已收藏！",type:"success"}),e.isFavorite=!0,e.favoriteId=t.data):e.$message.error(t.msg)})).catch((function(t){}))},cancelReply:function(){this.isReply=!1,this.toUser=this.idleItemInfo.userId,this.toMessage=null,this.replyData.toUserNickname="",this.replyData.toMessage=""},sendMessage:function(){var t=this,e=this.messageContent.trim();if(null==this.toUser&&(this.toUser=this.idleItemInfo.userId),e){for(var s=e.split(/\r?\n/),a=s[0],i=1;i<s.length;i++)a+="<br>"+s[i];this.$api.sendMessage({idleId:this.idleItemInfo.id,content:a,toUser:this.toUser,toMessage:this.toMessage}).then((function(e){1===e.status_code?(t.$message({message:"留言成功！",type:"success"}),t.messageContent="",t.cancelReply(),t.getAllIdleMessage()):t.$message.error("留言失败！"+e.msg)})).catch((function(){t.$message.error("留言失败！")}))}else this.$message.error("留言为空！")}}}}).call(this,s("1157"))},ff1e:function(t,e,s){}}]);