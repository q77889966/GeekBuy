(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c5d59e5"],{"550c":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("app-head",{attrs:{"nickname-value":e.userInfo.nickname,avatarValue:e.userInfo.avatar}}),t("app-body",[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.eidtAddress,expression:"!eidtAddress"}]},[t("div",{staticClass:"user-info-container"},[t("div",{staticClass:"user-info-details"},[t("el-upload",{attrs:{action:"http://localhost:8080/file/","on-success":e.fileHandleSuccess,"file-list":e.imgFileList,accept:"image/*"}},[t("el-image",{staticStyle:{width:"120px",height:"120px","border-radius":"10px"},attrs:{src:e.userInfo.avatar,fit:"contain"}})],1),t("div",{staticClass:"user-info-details-text"},[t("div",{staticClass:"user-info-details-text-nickname"},[e._v(e._s(e.userInfo.nickname))]),t("div",{staticClass:"user-info-details-text-time"},[e._v(e._s(e.userInfo.signInTime)+" 加入平台")]),t("div",{staticClass:"user-info-details-text-edit"},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.userInfoDialogVisible=!0}}},[e._v("编辑个人信息")])],1),t("el-dialog",{attrs:{title:"编辑个人信息",visible:e.userInfoDialogVisible,width:"400px"},on:{close:e.finishEdit,"update:visible":function(t){e.userInfoDialogVisible=t}}},[t("div",{staticClass:"edit-tip"},[e._v("昵称")]),t("el-input",{attrs:{disabled:e.notUserNicknameEdit},on:{change:e.saveUserNickname},model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}},[t("el-button",{attrs:{slot:"append",type:"warning",icon:"el-icon-edit"},on:{click:function(t){e.notUserNicknameEdit=!1}},slot:"append"},[e._v("编辑\n                                ")])],1),e.userPasswordEdit?t("div",[t("div",{staticClass:"edit-tip"},[e._v("原密码")]),t("el-input",{attrs:{"show-password":""},model:{value:e.userPassword1,callback:function(t){e.userPassword1=t},expression:"userPassword1"}}),t("div",{staticClass:"edit-tip"},[e._v("新密码")]),t("el-input",{attrs:{"show-password":""},model:{value:e.userPassword2,callback:function(t){e.userPassword2=t},expression:"userPassword2"}}),t("div",{staticClass:"edit-tip"},[e._v("确认新密码")]),t("el-input",{attrs:{"show-password":""},model:{value:e.userPassword3,callback:function(t){e.userPassword3=t},expression:"userPassword3"}}),t("div",{staticClass:"edit-tip"}),t("el-button",{attrs:{plain:""},on:{click:e.savePassword}},[e._v("确认修改")])],1):t("div",[t("div",{staticClass:"edit-tip"},[e._v("密码")]),t("el-input",{attrs:{value:"123456",disabled:!0,"show-password":""}},[t("el-button",{attrs:{slot:"append",type:"warning",icon:"el-icon-edit"},on:{click:function(t){e.userPasswordEdit=!0}},slot:"append"},[e._v("编辑\n                                    ")])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.userInfoDialogVisible=!1}}},[e._v("完成")])],1)],1)],1)],1),t("div",{staticClass:"user-info-splace"},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.eidtAddress=!0}}},[e._v("编辑收货地址")])],1)]),t("div",{staticClass:"idle-container"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"我发布的",name:"1"}}),t("el-tab-pane",{attrs:{label:"我下架的",name:"2"}}),t("el-tab-pane",{attrs:{label:"我收藏的",name:"3"}}),t("el-tab-pane",{attrs:{label:"我卖出的",name:"4"}}),t("el-tab-pane",{attrs:{label:"我买到的",name:"5"}})],1),t("div",{staticClass:"idle-container-list"},e._l(e.dataList[e.activeName-1],(function(s,a){return t("div",{staticClass:"idle-container-list-item"},[t("div",{staticClass:"idle-container-list-item-detile",on:{click:function(t){return e.toDetails(e.activeName,s)}}},[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:s.imgUrl,fit:"cover"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"},[e._v("无图")])])]),t("div",{staticClass:"idle-container-list-item-text"},[t("div",{staticClass:"idle-container-list-title"},[e._v("\n                                    "+e._s(s.idleName)+"\n                                ")]),t("div",{staticClass:"idle-container-list-idle-details",domProps:{innerHTML:e._s(s.idleDetails)}},[e._v("\n                                    "+e._s(s.idleDetails)+"\n                                ")]),t("div",{staticClass:"idle-container-list-idle-time"},[e._v(e._s(s.timeStr))]),t("div",{staticClass:"idle-item-foot"},[t("div",{staticClass:"idle-prive"},[e._v("￥"+e._s(s.idlePrice)+"\n                                        "+e._s("4"===e.activeName||"5"===e.activeName?e.orderStatus[s.orderStatus]:"")+"\n                                    ")]),"4"!==e.activeName&&"5"!==e.activeName?t("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",plain:""},on:{click:function(t){return t.stopPropagation(),e.handle(e.activeName,s,a)}},slot:"reference"},[e._v(e._s(e.handleName[e.activeName-1])+"\n                                    ")]):e._e()],1)])],1)])})),0)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.eidtAddress,expression:"eidtAddress"}],staticClass:"address-container"},[t("el-page-header",{staticClass:"address-container-back",attrs:{content:"收货地址"},on:{back:function(t){e.eidtAddress=!1}}}),t("div",{staticClass:"address-container-add"},[t("div",{staticClass:"address-container-add-title"},[e._v("新增收货地址")]),t("div",{staticClass:"address-container-add-item"},[t("el-input",{attrs:{placeholder:"请输入收货人姓名",maxlength:"10","show-word-limit":""},model:{value:e.addressInfo.consigneeName,callback:function(t){e.$set(e.addressInfo,"consigneeName",t)},expression:"addressInfo.consigneeName"}},[t("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("收货人姓名")])])],1),t("div",{staticClass:"address-container-add-item"},[t("el-input",{attrs:{placeholder:"请输入收货人手机号",onkeyup:"this.value=this.value.replace(/[^\\d.]/g,'');",maxlength:"11","show-word-limit":""},model:{value:e.addressInfo.consigneePhone,callback:function(t){e.$set(e.addressInfo,"consigneePhone",t)},expression:"addressInfo.consigneePhone"}},[t("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("手机号")])])],1),t("div",{staticClass:"address-container-add-item"},[t("span",{staticClass:"demonstration"},[e._v("省/市/区")]),t("el-cascader",{attrs:{options:e.options,separator:" "},on:{change:e.handleAddressChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),t("div",{staticClass:"address-container-add-item"},[t("el-input",{attrs:{placeholder:"请输入详细地址（如道路、门牌号、小区、楼栋号等信息）",maxlength:"50","show-word-limit":""},model:{value:e.addressInfo.detailAddress,callback:function(t){e.$set(e.addressInfo,"detailAddress",t)},expression:"addressInfo.detailAddress"}},[t("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("详细地址")])])],1),t("el-checkbox",{model:{value:e.addressInfo.defaultFlag,callback:function(t){e.$set(e.addressInfo,"defaultFlag",t)},expression:"addressInfo.defaultFlag"}},[e._v("设置为默认地址")]),t("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.saveAddress}},[e._v("保存")])],1),t("div",{staticClass:"address-container-list"},[t("div",{staticStyle:{color:"#409EFF","font-size":"15px","padding-left":"10px"}},[e._v("已有收货地址")]),t("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.addressData}},[t("el-table-column",{attrs:{prop:"consigneeName",label:"收货人姓名",width:"100"}}),t("el-table-column",{attrs:{prop:"consigneePhone",label:"手机号",width:"120"}}),t("el-table-column",{attrs:{prop:"detailAddressText",label:"地址",width:"270"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(s.$index,s.row)}}},[e._v("编辑\n                            ")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(s.$index,s.row)}}},[e._v("删除\n                            ")])]}}])}),t("el-table-column",{attrs:{label:"是否默认地址",width:"110"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.defaultFlag?t("div",{staticStyle:{"padding-left":"10px",color:"#409EFF"}},[e._v(e._s(s.row.defaultAddress)+"\n                            ")]):t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleSetDefault(s.$index,s.row)}}},[e._v("设为默认\n                            ")])]}}])})],1)],1)],1),t("app-foot")],1)],1)},i=[],n=s("6e70"),d=s("4fc4"),o=s("85a9"),r=s("dc58"),l={name:"me",components:{AppHead:n["a"],AppBody:d["a"],AppFoot:o["a"]},data:function(){return{imgFileList:[],addressInfo:{consigneeName:"",consigneePhone:"",provinceName:"",cityName:"",regionName:"",detailAddress:"",defaultFlag:!1},activeName:"1",handleName:["下架","删除","取消收藏","",""],dataList:[[],[],[],[],[],[],[],[]],orderStatus:["待付款","待发货","待收货","已完成","已取消"],userInfoDialogVisible:!1,notUserNicknameEdit:!0,userPasswordEdit:!1,userPassword1:"",userPassword2:"",userPassword3:"",eidtAddress:!1,selectedOptions:[],options:r["a"],userInfo:{accountNumber:"",avatar:"",nickname:"",signInTime:""},addressData:[]}},created:function(){var e=this;this.$globalData.userInfo.nickname?(this.userInfo=this.$globalData.userInfo,console.log(this.userInfo)):this.$api.getUserInfo().then((function(t){1===t.status_code&&(t.data.signInTime=t.data.signInTime.substring(0,10),console.log(t.data),e.$globalData.userInfo=t.data,e.userInfo=e.$globalData.userInfo)})),this.getAddressData(),this.getIdleItemData(),this.getMyOrder(),this.getMySoldIdle(),this.getMyFavorite()},methods:{getMyFavorite:function(){var e=this;this.$api.getMyFavorite().then((function(t){if(console.log("getMyFavorite",t),1===t.status_code)for(var s=0;s<t.data.length;s++){var a=JSON.parse(t.data[s].idleItem.pictureList);e.dataList[2].push({favoriteId:t.data[s].id,id:t.data[s].idleItem.id,imgUrl:a.length>0?a[0]:"",idleName:t.data[s].idleItem.idleName,idleDetails:t.data[s].idleItem.idleDetails,timeStr:t.data[s].createTime.substring(0,10)+" "+t.data[s].createTime.substring(11,19),idlePrice:t.data[s].idleItem.idlePrice})}}))},getMySoldIdle:function(){var e=this;this.$api.getMySoldIdle().then((function(t){if(1===t.status_code){console.log("getMySoldIdle",t.data);for(var s=0;s<t.data.length;s++){var a=JSON.parse(t.data[s].idleItem.pictureList);e.dataList[3].push({id:t.data[s].id,imgUrl:a.length>0?a[0]:"",idleName:t.data[s].idleItem.idleName,idleDetails:t.data[s].idleItem.idleDetails,timeStr:t.data[s].createTime.substring(0,10)+" "+t.data[s].createTime.substring(11,19),idlePrice:t.data[s].orderPrice,orderStatus:t.data[s].orderStatus})}}}))},getMyOrder:function(){var e=this;this.$api.getMyOrder().then((function(t){if(1===t.status_code){console.log("getMyOrder",t.data);for(var s=0;s<t.data.length;s++){var a=JSON.parse(t.data[s].idleItem.pictureList);e.dataList[4].push({id:t.data[s].id,imgUrl:a.length>0?a[0]:"",idleName:t.data[s].idleItem.idleName,idleDetails:t.data[s].idleItem.idleDetails,timeStr:t.data[s].createTime.substring(0,10)+" "+t.data[s].createTime.substring(11,19),idlePrice:t.data[s].orderPrice,orderStatus:t.data[s].orderStatus})}}}))},getIdleItemData:function(){var e=this;this.$api.getAllIdleItem().then((function(t){if(console.log(t),1===t.status_code)for(var s=0;s<t.data.length;s++){t.data[s].timeStr=t.data[s].releaseTime.substring(0,10)+" "+t.data[s].releaseTime.substring(11,19);var a=JSON.parse(t.data[s].pictureList);t.data[s].imgUrl=a.length>0?a[0]:"",1===t.data[s].idleStatus?e.dataList[0].push(t.data[s]):2===t.data[s].idleStatus&&e.dataList[1].push(t.data[s])}}))},getAddressData:function(){var e=this;this.$api.getAddress().then((function(t){if(1===t.status_code){for(var s=t.data,a=0;a<s.length;a++)s[a].detailAddressText=s[a].provinceName+s[a].cityName+s[a].regionName+s[a].detailAddress,s[a].defaultAddress=s[a].defaultFlag?"默认地址":"设为默认";console.log(s),e.addressData=s}}))},handleClick:function(e,t){console.log(this.activeName)},saveUserNickname:function(){var e=this;this.notUserNicknameEdit=!0,this.$api.updateUserPublicInfo({nickname:this.userInfo.nickname}).then((function(t){console.log(t),e.$globalData.userInfo.nickname=e.userInfo.nickname}))},savePassword:function(){var e=this;this.userPassword1&&this.userPassword2?this.userPassword2===this.userPassword3?this.$api.updatePassword({oldPassword:this.userPassword1,newPassword:this.userPassword2}).then((function(t){1===t.status_code?(e.userPasswordEdit=!1,e.$message({message:"修改成功！",type:"success"}),e.userPassword1="",e.userPassword2="",e.userPassword3=""):e.$message.error("旧密码错误，修改失败！")})):this.$message.error("两次输入的密码不一致！"):this.$message.error("密码为空！")},finishEdit:function(){this.notUserNicknameEdit=!0,this.userInfoDialogVisible=!1,this.userPasswordEdit=!1},handleAddressChange:function(e){console.log(e),this.addressInfo.provinceName=e[0],this.addressInfo.cityName=e[1],this.addressInfo.regionName=e[2]},handleEdit:function(e,t){console.log(e,t),this.addressInfo=JSON.parse(JSON.stringify(t)),this.selectedOptions=["","",""],this.selectedOptions[0]=t.provinceName,this.selectedOptions[1]=t.cityName,this.selectedOptions[2]=t.regionName},handleDelete:function(e,t){var s=this;console.log(e,t),this.$confirm("是否确定删除该地址?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s.$api.deleteAddress(t).then((function(a){1===a.status_code?(s.$message({message:"删除成功！",type:"success"}),s.addressData.splice(e,1),t.defaultFlag&&s.addressData.length>0&&(s.addressData[0].defaultFlag=!0,s.addressData[0].defaultAddress="默认地址",s.update({id:s.addressData[0].id,defaultFlag:!0}))):s.$message.error("系统异常，删除失败！")})).catch((function(){s.$message.error("网络异常！")}))})).catch((function(){}))},handleSetDefault:function(e,t){console.log(e,t),t.defaultFlag=!0,this.update(t)},toDetails:function(e,t){"4"===e||"5"===e?this.$router.push({path:"/order",query:{id:t.id}}):this.$router.push({path:"/details",query:{id:t.id}})},handle:function(e,t,s){var a=this;console.log(e,t,s),this.$confirm("是否确认？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){"1"===e?a.$api.updateIdleItem({id:t.id,idleStatus:2}).then((function(e){console.log(e),1===e.status_code?(a.dataList[0].splice(s,1),t.idleStatus=2,a.dataList[1].unshift(t)):a.$message.error(e.msg)})):"2"===e?a.$api.updateIdleItem({id:t.id,idleStatus:0}).then((function(e){console.log(e),1===e.status_code?a.dataList[1].splice(s,1):a.$message.error(e.msg)})):"3"===e&&a.$api.deleteFavorite({id:t.favoriteId}).then((function(e){console.log(e),1===e.status_code?(a.$message({message:"已取消收藏！",type:"success"}),a.dataList[2].splice(s,1)):a.$message.error(e.msg)})).catch((function(e){}))})).catch((function(){}))},fileHandleSuccess:function(e,t,s){var a=this;console.log("file:",e,t,s);var i=e.data;this.imgFileList=[],this.$api.updateUserPublicInfo({avatar:i}).then((function(e){console.log(e),a.userInfo.avatar=i,a.$globalData.userInfo.avatar=i}))},update:function(e){var t=this;this.$api.updateAddress(e).then((function(e){1===e.status_code?(t.getAddressData(),t.$message({message:"修改成功！",type:"success"})):t.$message.error("系统异常，修改失败！")})).catch((function(){t.$message.error("网络异常！")}))},saveAddress:function(){var e=this;this.addressInfo.id?(console.log("update:",this.addressInfo),this.update(this.addressInfo),this.addressInfo={consigneeName:"",consigneePhone:"",provinceName:"",cityName:"",regionName:"",detailAddress:"",defaultFlag:!1},this.selectedOptions=[]):this.addressData.length>=5?this.$message.error("已达到最大地址数量！"):(console.log(this.addressInfo),this.$api.addAddress(this.addressInfo).then((function(t){1===t.status_code?(e.getAddressData(),e.$message({message:"新增成功！",type:"success"}),e.selectedOptions=[],e.addressInfo={consigneeName:"",consigneePhone:"",provinceName:"",cityName:"",regionName:"",detailAddress:"",defaultFlag:!1}):e.$message.error("系统异常，新增失败！")})).catch((function(t){e.$message.error("网络异常！")})))}}},c=l,u=(s("d370"),s("2877")),p=Object(u["a"])(c,a,i,!1,null,"4b097895",null);t["default"]=p.exports},c648:function(e,t,s){},d370:function(e,t,s){"use strict";s("c648")}}]);